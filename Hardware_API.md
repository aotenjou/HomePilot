# 智能家居管理系统硬件API文档

## 概述

本文档描述了智能家居管理系统的所有API接口，用于前后端对接开发。

- **基础URL**: `http://localhost:8080`
- **认证方式**: JWT Token (在请求头中携带)
- **数据格式**: JSON
- **字符编码**: UTF-8

<!-- FINISH -->
## 标准房间模块
### 标准房间交互
**发送状态：每3秒发送一次**
**发送主题：Hardware_OutPut**
```json
{
  "title": "Room",
  "device": "48:11:31:A8:14:6A",  //设备的MAC码，具有唯一性
  "LightA": 0,      //灯A
  "LightB": 0,      //灯B
  "LightC": 0,      //灯C
  "LightAuto":0,    //有人时自动开灯（光感和人都在时才启动，不自动关闭）
  "Human":0,        //只有光敏和人体感应都为1时才认定有人
  /*灯的状态分为三种，0:关闭，1:开启，-1:不存在*/
  "Wendu":32,
  "Shidu":70,
  "FanState":0,     //风扇状态
  /*风扇状态有六种，0关闭，1最小风力，5最大风力*/
  "AutoTem":26,     //自动开开空调的温度
  /*当AutoTem设定为-1时，不再使用自动模式*/
  "FireState":0,    //火焰状态，1为有火
  "FireOpen":1,     //火焰报警开启状态
  "GasState":0,     //烟雾状态，1为有泄漏情况
}
```
**接受状态：持续接收**
**接受主题：Hardware_InPut_Room**
**传递数据A：控制灯光**：
```json
{
  "Device":"48:11:31:A8:14:6A",
  "Code": 1,
  "LightCode":"A",   //选择ABC三种灯的其中一个
  "Result":1,      //1为开启，0为关闭，-1为不存在
}
```
**传递数据B：控制风扇开关**：
```json
{
  "Device":"48:11:31:A8:14:6A",
  "Code": 2,
  "FanState":5,    //设定风扇状态，0为关闭，其他值为风扇强度
  "Auto":26,       //自动状态下，在高于设定温度时，会打开风扇
  //请注意，风扇设定为0时，如果高于设定温度，会自动调整到强度1，除非auto设定为0
}
```
**传递数据C：设置火警报警**：
```json
{
  "Device":"48:11:31:A8:14:6A",
  "Code": 3,
  "FireOpen":1,    //设定火警是否需要报警
}
```

**传递数据D：设置自动亮灯**：
```json
{
  "Device":"48:11:31:A8:14:6A",
  "Code": 4,
  "LightAuto":1,    //设定是否需要自动开灯
}
```
**完成目标**：实现基本操作和小屏幕（模拟位于门口的智能终端）
**差距目标**：成功实现NFC







## 标准植物模块
### 标准植物交互
**发送状态：每3秒发送一次**
**发送主题：Hardware_OutPut**
```json
{
  "title": "Plant",
  "device": "48:11:31:A8:14:6A",  //设备的MAC码，具有唯一性
  "exLightState": 0,
  "autoLight" : 0,
  //接下来的温湿度是植物附近的
  "Wendu":32,
  "Shidu":70,
  //植物加风扇是可行的，在浇水后开启，关闭需要总系统控制（让总系统控制时间自动关闭，防止水分过多导致烂根
  "FanState":0,                   //只有0和1两种状态
  "autoFan":1,                    //开启后，只要浇水自动开启风扇
  //接下来的水泵是自动控制的
  "waterState":0,
  "autoWater":1,
  "hum":70,                       //土壤湿度
  "autoHum":40                    //当土壤湿度下降到40时，开启水泵
}
```
**接受状态：持续接收**
**接受主题：Hardware_InPut_Room**
**传递数据A：控制灯光**：
```json
{
  "Device":"48:11:31:A8:14:6A",
  "Code": 1,
  "exLightState": 0,              //在有自动的时候遵循自动，无自动时遵循设置
  "autoLight" : 0,                //是否天黑自动补光
}
```
**传递数据B：控制风扇开关**：
```json
{
  "Device":"48:11:31:A8:14:6A",
  "Code": 2,
  "FanState":1,
  "autoFan":1,                    //只要有自动，水泵开启自动打开风扇
}
```
**传递数据C：设置水泵**：
```json
{
  "Device":"48:11:31:A8:14:6A",
  "Code": 3,
  "waterState":0,                 //设置开启水泵，只有自动关闭时才允许设置
  "autoWater":0,                  //是否开启自动，水泵会开启10秒
  "autoHum":50                    //湿度低于设定值直接开启
}
```
**完成目标**：实现基本操作和小屏幕（模拟位于门口的智能终端）
**差距目标**：成功实现NFC





<!-- ## 卫生间模块
### 卫生间状态分类
A模式 - 完全终端控制:只由终端控制电灯开关，不管是否有人
B模式 - 柔性终端控制:电灯在无人的时候受终端影响，有人时无法通过终端控制灯的开关
C模式 - 自主硬件控制:终端无法控制，由硬件自主控制
### 浴室交互
**发送状态：每秒发送一次**
**发送主题：Hardware_OutPut**
```json
{
  "title": "Toilet",
  "Device": "48:11:31:A8:14:6A",  //设备的MAC码，具有唯一性
  "toilet_type": "A",
  "toilet_state": 0,      //是否有人
  "light_state": 0,       //是否开灯
  "fan_state": 0          //是否开风扇
}
```
**接受状态：持续接收**
**接受主题：Hardware_InPut_Toilet**
```json
{
  "Device":"48:11:31:A8:14:6A",
  "toilet_type": "A",
  "light_state": 0,
  "fan_state": 0,
}
```
**基本目标**：实现3个状态，能够通信
**最终目标**：成功实现小屏幕，NFC通信 -->





<!-- ## 门禁模块
### 门禁交互
**发送状态：有按键发送一次**
**发送主题：Hardware_OutPut**
```json
{
  "title": "Door",
  "Device": "48:11:31:A8:14:6A",  //设备的MAC码，具有唯一性
}
```
**接受状态：接收**
**接受主题：Hardware_InPut_Door**
```json
{
  "Device":"48:11:31:A8:14:6A",
  "Code": "1"
  //即在门禁显示房主已经知晓（持续10秒时间）
}
```
**接受主题：Hardware_InPut_Door**
```json
{
  "Device":"48:11:31:A8:14:6A",
  "Code": "2"
  //表示房主已经出门
}
```
**接受主题：Hardware_InPut_Door**
```json
{
  "Device":"48:11:31:A8:14:6A",
  "Code": "3"
  //表示房主已经回家
}
```
**基本目标**：能够开关门禁，控制是否外出 -->
